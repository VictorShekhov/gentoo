From cbdd904c174eac57e1d4df4e4b1abc83adaed095 Mon Sep 17 00:00:00 2001
From: Mike Gilbert <floppym@gentoo.org>
Date: Wed, 29 Nov 2017 16:19:55 -0500
Subject: [PATCH] Add configure option for systemd generator dir

---
 Makefile.in | 3 ++-
 configure   | 7 +++++++
 2 files changed, 9 insertions(+), 1 deletion(-)

diff --git a/Makefile.in b/Makefile.in
index 994dfea..8354c22 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -18,6 +18,7 @@ statedir	:= @statedir@
 mandir		:= @mandir@
 docdir		:= @docdir@
 unitdir		:= @unitdir@
+generatordir	:= @generatordir@
 
 runparts	:= @runparts@
 
@@ -88,7 +89,7 @@ test: all
 
 install: all
 	install -m755 -D $(builddir)/bin/crontab $(DESTDIR)$(bindir)/crontab
-	install -m755 -D $(builddir)/bin/systemd-crontab-generator $(DESTDIR)$(libdir)/systemd/system-generators/systemd-crontab-generator
+	install -m755 -D $(builddir)/bin/systemd-crontab-generator $(DESTDIR)$(generatordir)/systemd-crontab-generator
 	install -m755 -D $(builddir)/bin/remove_stale_stamps $(DESTDIR)$(libdir)/$(package)/remove_stale_stamps
 	install -m755 -D $(builddir)/bin/mail_on_failure $(DESTDIR)$(libdir)/$(package)/mail_on_failure
 	install -m755 -D $(builddir)/bin/boot_delay $(DESTDIR)$(libdir)/$(package)/boot_delay
diff --git a/configure b/configure
index 2f4fb24..dc040c1 100755
--- a/configure
+++ b/configure
@@ -9,6 +9,7 @@ statedir='/var/spool/cron'
 mandir='$(datadir)/man'
 docdir='$(datadir)/doc/$(package)'
 unitdir='$(libdir)/systemd/system'
+generatordir='%(libdir)/systemd/system-generators'
 runparts='/usr/bin/run-parts'
 enable_setgid=no
 
@@ -40,6 +41,7 @@ statedir:,
 mandir:,
 docdir:,
 unitdir:,
+generatordir:,
 runparts:,
 enable-boot::,
 enable-minutely::,
@@ -109,6 +111,10 @@ do
             unitdir="${2}"
             shift 2;;
 
+        '--generatordir')
+            generatordir="${2}"
+            shift 2;;
+
         '--runparts')
             runparts="${2}"
             shift 2;;
@@ -225,6 +231,7 @@ s|@statedir@|${statedir}|g
 s|@mandir@|${mandir}|g
 s|@docdir@|${docdir}|g
 s|@unitdir@|${unitdir}|g
+s|@generatordir@|${generatordir}|g
 s|@runparts@|${runparts}|g
 " Makefile.in >> Makefile
 
-- 
2.15.1

